<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RPR Widget with Search</title>
</head>
<body>
  <h1>RPR Property Estimation</h1>

  <!-- Search Bar Widget -->
  <div id="rpr-search-container"></div>

  <!-- AVM Widget -->
  <div id="rpr-avm-container"></div>

  <script>
    // Debug info
    const debugInfo = {
      hostname: window.location.hostname,
      href: window.location.href,
      referrer: document.referrer,
      userAgent: navigator.userAgent
    };
    console.log("DEBUG INFO:", debugInfo);
  </script>

  <!-- RPR Search Widget -->
  <script>
    window.rprSearchWidgetOptions = {
      Token: "F4E571BF-8D9C-4929-BBF3-4588AB922D43",
      ContainerId: "rpr-search-container",
      CoBrandCode: "btswavesoftheemeraldcoast",
      OnAddressSelected: function(address) {
        // When a user selects an address, load the AVM widget
        window.rprAvmWidgetOptions = {
          Token: "F4E571BF-8D9C-4929-BBF3-4588AB922D43",
          Query: address,
          CoBrandCode: "btswavesoftheemeraldcoast",
          ShowRprLinks: false,
          ContainerId: "rpr-avm-container"
        };
        // Load the AVM widget script dynamically
        var script = document.createElement("script");
        script.src = "https://www.narrpr.com/widgets/avm-widget/widget.ashx/script";
        document.body.appendChild(script);
      }
    };
  </script>
  <script src="https://www.narrpr.com/widgets/search-widget/script"></script>
</body>
</html>
