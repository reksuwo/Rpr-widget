<div id="custom-rpr-widget" style="max-width:600px;">
  <h2>Search Property</h2>
  <form id="rpr-search-form">
    <input type="text" id="address" placeholder="Enter address" style="width:100%; padding:8px;" />
    <button type="submit" style="margin-top:8px; padding:8px 12px;">Search</button>
  </form>
  <div id="search-results" style="margin-top:12px; white-space: pre-wrap;"></div>
</div>

<script>
document.getElementById("rpr-search-form").addEventListener("submit", async (e) => {
  e.preventDefault();
  const address = document.getElementById("address").value;
  const resultsDiv = document.getElementById("search-results");

  resultsDiv.textContent = "Searching...";

  try {
    const response = await fetch(`/api/search?address=${encodeURIComponent(address)}`);
    const data = await response.json();

    resultsDiv.textContent = JSON.stringify(data, null, 2);
  } catch (err) {
    resultsDiv.textContent = "Error fetching data";
    console.error(err);
  }
});
</script>
